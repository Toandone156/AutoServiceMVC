@model AutoServiceMVC.Models.Product

@{
	ViewData["Title"] = "Details";
}

<section class="ftco-section">
	<div class="container mt-5">
		<div class="row justify-content-center mb-5 pb-3">
			<div class="col-md-7 heading-section ftco-animate text-center">
				<span class="subheading">Product</span>
				<h2 class="mb-4">View Detail</h2>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-6 mb-5 ftco-animate">
				<img src="@Model.ProductImage" class="img-fluid" alt="@Model.ProductName" width="100%">
			</div>
			<div class="col-lg-6 product-details pl-md-5 ftco-animate">
				<h3>@Model.ProductName</h3>
				<div class="star-rating">
					<div class="back-stars">
						<span class="star" aria-hidden="true"></span>
						<span class="star" aria-hidden="true"></span>
						<span class="star" aria-hidden="true"></span>
						<span class="star" aria-hidden="true"></span>
						<span class="star" aria-hidden="true"></span>

						<div class="front-stars" style="width: @(Convert.ToInt32(Model.ProductRating/5*100))%">
							<span class="star" aria-hidden="true"></span>
							<span class="star" aria-hidden="true"></span>
							<span class="star" aria-hidden="true"></span>
							<span class="star" aria-hidden="true"></span>
							<span class="star" aria-hidden="true"></span>
						</div>
					</div>
				</div>
				<p class="price"><span>@Model.Price.ToString("C")</span></p>
				<p>@Model.ProductDescription</p>
				<div class="row mt-4">
					<div class="input-group col-md-6 d-flex mb-3">
						<span class="input-group-btn mr-2">
							<button id="minus-button" type="button" class="quantity-left-minus btn" data-type="minus" data-field="">
								<i class="icon-minus"></i>
							</button>
						</span>
						<input type="text" id="quantity" name="quantity" disabled class="form-control input-number" value="1" min="1" max="100">
						<span class="input-group-btn ml-2">
							<button id="plus-button" type="button" class="quantity-right-plus btn" data-type="plus" data-field="">
								<i class="icon-plus"></i>
							</button>
						</span>
					</div>
					<div class="col-md-6">
						<p><a id="addtocartButton" href="#" class="btn btn-primary py-3 px-5">Add to Cart</a></p>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

@await Component.InvokeAsync("BestSellerComponent")

<section class="ftco-section contact-section">
	<div class="container">
		<div class="row justify-content-center mb-5">
			<div class="col-md-7 heading-section text-center ftco-animate">
				<span class="subheading">Feedback</span>
				<h2 class="mb-4">From Coffeer</h2>
			</div>
		</div>

		<div class="row block-9">
			<div class="col-md-2"></div>
			<div class="col-md-8">
				<ul class="comment-list">
					<li class="comment">
						<div class="comment-body">
							<h3>John Doe</h3>
							<div class="meta">June 27, 2018 at 2:21pm</div>
							<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>
							<img src="~/images/about.jpg" width="100%"/>
						</div>
					</li>
					<li class="comment">
						<div class="comment-body">
							<h3>John Doe</h3>
							<div class="meta">June 27, 2018 at 2:21pm</div>
							<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>
							<img src="~/images/about.jpg" width="100%"/>
						</div>
					</li>
					<li class="comment">
						<div class="comment-body">
							<h3>John Doe</h3>
							<div class="meta">June 27, 2018 at 2:21pm</div>
							<div class="d-flex justify-content-lg-between">
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>
								<img src="~/images/about.jpg" width="100%" height="100%"/>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</div>
</section>

@section Scripts {
	<script>
		var input = document.getElementById("quantity");
		var plus = document.getElementById("plus-button");
		var minus = document.getElementById("minus-button");
		var addButton = document.getElementById("addtocartButton");

		console.log(plus)
		console.log(minus)

		plus.addEventListener("click", function() {
			let quantity = input.value;
			input.value = ++quantity;
		})

		minus.addEventListener("click", function() {
			let quantity = input.value;
			if (quantity > 1) input.value = --quantity;
		})

		addButton.addEventListener("click", e => {
			e.preventDefault();

			debugger

			AddItemToCart("@Model.ProductId", "@Model.ProductName", "@Model.Price", "@Model.ProductImage", input.value);
		});
	</script>
}